import{S as lr,i as ar,s as ur,k as O,l as I,m as E,h as $,n as x,b as we,A as Pe,H as Wr,o as Br,I as Vr,J as _t,K as qr,q as me,L as Ke,a as oe,v as Dr,r as de,M as et,c as ce,w as Rr,N as se,F as k,x as Hr,O as tt,P as Lr,f as Xr,t as Zr,Q as Yr,y as Qr,R as Gr,u as Ur,T as Fr,e as Ct,U as Jr}from"../../chunks/index-6a903410.js";import{_ as Tt}from"../../chunks/preload-helper-aa6bc0ce.js";const Kr=[":",";",",","(",")","[","]","{","}","\u03C0","\xB1","+","-","*","/","%",'"',"'","`","@","="],y={escape:e=>e=="\\",space:e=>/[\r\n\t\s]/.test(e),digit:e=>/^[0-9]$/.test(e),sign:e=>/^[+-]$/.test(e),dot:e=>e==".",quote:e=>/^["'`]$/.test(e),symbol:e=>Kr.includes(e),hexNum:e=>/^[0-9a-f]$/i.test(e),hex:(e,t,r)=>e=="0"&&y.letter(t,"x")&&y.hexNum(r),expWithSign:(e,t,r)=>y.letter(e,"e")&&y.sign(t)&&y.digit(r),exp:(e,t)=>y.letter(e,"e")&&y.digit(t),dots:(e,t)=>y.dot(e)&&y.dot(t),letter:(e,t)=>String(e).toLowerCase()==String(t).toLowerCase(),comment:(e,t)=>e=="/"&&t=="*",inlineComment:(e,t)=>e=="/"&&t==="/",selfClosedTag:(e,t)=>e=="/"&&t==">",closedTag:(e,t)=>e=="<"&&t=="/"};class K{constructor({type:t,value:r,pos:n,status:s}){this.type=t,this.value=r,this.pos=n,s&&(this.status=s)}isSymbol(...t){let r=this.type=="Symbol";return t.length?t.some(n=>n===this.value):r}isSpace(){return this.type=="Space"}isNumber(){return this.type=="Number"}isWord(){return this.type=="Word"}}function G(e){let t=-1,r=e.length,n=-1,s=0;return{curr(i=0){return e[t+i]},next(i=1){let a=e[t+=i];return a===`
`?(s++,n=0):n+=i,a},end(){return t>=r},get(){return{prev:e[t-1],curr:e[t+0],next:e[t+1],next2:e[t+2],next3:e[t+3],pos:[n,s]}}}}function en(e){for(;e.next();){let{curr:t,prev:r}=e.get();if(y.comment(t,r))break}}function tn(e){for(;e.next()&&e.curr()!==`
`;);}function Ot(e){return[":",";",",","{","}","(",")","[","]"].includes(e)}function It(e){let t="";for(;!e.end();){let{curr:r,next:n}=e.get();t+=r;let s=y.symbol(n)||y.space(n)||y.digit(n);if(t.length&&s&&!y.closedTag(r,n))break;e.next()}return t.trim()}function rn(e){let t="";for(;!e.end();){let{curr:r,next:n}=e.get();if(t+=r,!y.space(n))break;e.next()}return t}function Pt(e){let t="",r=!1;for(;!e.end();){let{curr:n,next:s,next2:i,next3:a}=e.get();if(t+=n,r&&y.dot(s)||(y.dot(n)&&(r=!0),y.dots(s,i)))break;if(y.expWithSign(s,i,a))t+=e.next()+e.next();else if(y.exp(s,i))t+=e.next();else if(!y.digit(s)&&!y.dot(s))break;e.next()}return t}function nn(e){let t="0x";for(e.next(2);!e.end();){let{curr:r,next:n}=e.get();if(t+=r,!y.hexNum(n))break;e.next()}return t}function je(e){return e[e.length-1]}function re(e,t={}){let r=G(String(e).trim()),n=[],s=[];for(;r.next();){let{prev:a,curr:l,next:u,next2:o,pos:c}=r.get();if(y.comment(l,u))en(r);else if(t.ignoreInlineComment&&y.inlineComment(l,u))tn(r);else if(y.hex(l,u,o)){let f=nn(r);n.push(new K({type:"Number",value:f,pos:c}))}else if(y.digit(l)||y.digit(u)&&y.dot(l)&&!y.dots(a,l)){let f=Pt(r);n.push(new K({type:"Number",value:f,pos:c}))}else if(y.symbol(l)&&!y.selfClosedTag(l,u)){let f=je(n),p=y.digit(u)||y.dot(u)&&y.digit(o);if(l==="-"&&p&&(!f||!f.isNumber())){let h=Pt(r);n.push(new K({type:"Number",value:h,pos:c}));continue}let m={type:"Symbol",value:l,pos:c};if(s.length&&y.escape(f.value)){n.pop();let h=It(r);h.length&&n.push(new K({type:"Word",value:h,pos:c}))}else y.quote(l)&&(je(s)==l?(s.pop(),m.status="close"):(s.push(l),m.status="open")),n.push(new K(m))}else if(y.space(l)){let f=rn(r),p=je(n),{next:m}=r.get();if(!s.length&&p){let h=p.value,g=Ot(h)&&h!==")",_=Ot(m)&&m!=="(";if(g||_)continue;f=t.preserveLineBreak?l:" "}n.length&&m&&m.trim()&&n.push(new K({type:"Space",value:f,pos:c}))}else{let f=It(r);f.length&&n.push(new K({type:"Word",value:f,pos:c}))}}let i=je(n);return i&&i.isSpace()&&(n.length=n.length-1),n}function We(e){let t=G(re(e)),r={},n=[],s,i=!1;for(;t.next();){let{prev:a,curr:l,next:u}=t.get();if(l.isSymbol(":")&&!s)s=rt(n),n=[];else if(l.isSymbol(";")&&s)r[s]=Wt(s,rt(n),i),n=[],s=null,i=!1;else if(!l.isSymbol(";")){let o=a&&a.isSymbol("-"),c=u&&u.isSymbol("-"),f=l.isSymbol("-");!s&&!n.length&&f&&!o&&!c?u&&u.isSymbol(":")?n.push(l):i=!0:n.push(l)}}return n.length&&s&&(r[s]=Wt(s,rt(n),i)),r}function Wt(e,t,r){return["fill-rule","fill"].includes(e)?t:r?`-1 * (${t})`:t}function rt(e){return e.map(t=>t.value).join("")}function L(e,t,r){return e=Number(e)||0,Math.max(t,Math.min(r,e))}function sn(e,t){return e?typeof t=="function"?t():t:""}function ln(e,t,r){let n=0,s=e,i=u=>u>0&&u<1?.1:1,a=arguments.length;a==1&&([e,t]=[i(e),e]),a<3&&(r=i(e));let l=[];for(;(r>=0&&e<=t||r<0&&e>t)&&(l.push(e),e+=r,!(n++>=65535)););return l.length||l.push(s),l}function or(e,t){for(let[r,n]of Object.entries(t))e[r]=e[n];return e}function Bt(e){return/^[a-zA-Z]$/.test(e)}function j(e){return e==null}function nt(e){return j(e)||Number.isNaN(e)}function pe(e){return j(e)||e===""}function ut(e){let t=r=>(...n)=>e(r,...n);return t.lazy=!0,t}function an(e,t){let[r,n=1]=String(e).split(/[x-]/);r=L(Math.ceil(r)||1,1,65536),n=L(Math.ceil(n)||1,1,65536);let s=r*n,i=[],a=1;if(/x/.test(e))for(let l=1;l<=n;++l)for(let u=1;u<=r;++u)i.push(t(a++,u,l,s,r,n));else if(/-/.test(e))if(s=Math.abs(r-n)+1,r<=n)for(let l=r;l<=n;++l)i.push(t(l,l,1,s,s,1));else for(let l=r;l>=n;--l)i.push(t(l,l,1,s,s,1));else for(let l=1;l<=r;++l)i.push(t(l,l,1,r,r,1));return i}function Be(e,t,r){return"c-"+e+"-"+t+"-"+r}function P(e){let t=e;for(;t&&!j(t.value);)t=t.value;return j(t)?"":t}function Vt(e,t=0){let r=3735928559^t,n=1103547991^t;for(let s=0,i;s<e.length;s++)i=e.charCodeAt(s),r=Math.imul(r^i,2654435761),n=Math.imul(n^i,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)}function un(e){let t=r=>j(r)?"":r;return(r,...n)=>{let s=cn(r).reduce((i,a,l)=>i+a+t(n[l]),"");return e(s)}}function on(){let e=0;return(t="")=>`${t}-${++e}`}function Y(e,t,r){return t+e*(r-t)}function he(e=""){return e+Math.random().toString(32).substr(2)}function cn(e){return j(e)?[]:Array.isArray(e)?e:[e]}function V(e,t={symbol:",",noSpace:!1}){let r=[],n=[],s=[],i=[];if(pe(e))return r;let a=G(re(e));function l(u){let o=t.symbol||",";return t.noSpace?u.isSymbol(o):u.isSymbol(o)||u.isSpace()}for(;a.next();){let{prev:u,curr:o,next:c}=a.get();o.isSymbol("(")&&s.push(o.value),o.isSymbol(")")&&s.pop(),o.status==="open"&&i.push(o.value),o.status==="close"&&i.pop();let f=!s.length&&!i.length;if(f){let p=t.noSpace&&o.isSpace()&&l(c),m=t.noSpace&&o.isSpace()&&l(u);if(p||m)continue}f&&l(o)?(r.push(qt(n)),n=[]):n.push(o)}return n.length&&r.push(qt(n)),r}function qt(e){return e.map(t=>t.value).join("")}const fn=["auto","reverse"],pn=["deg","rad","grad","turn"];function hn(e){let t=G(re(e)),r=!1,n="",s={direction:"",angle:""};for(;t.next();){let{prev:i,curr:a,next:l}=t.get();if(a.isWord()&&fn.includes(a.value))s.direction=a.value,r=!0;else if(a.isNumber())s.angle=Number(a.value),r=!0;else if(a.isWord()&&i&&i.isNumber()&&pn.includes(a.value))n=a.value;else if(a.isSpace()&&s.direction!==""&&s.angle!=="")break}return r||(s.direction="auto"),mn(s,n)}function mn(e,t){let{angle:r}=e;return r===""&&(r=0),t==="rad"&&(r/=Math.PI/180),t==="grad"&&(r*=.9),t==="turn"&&(r*=360),Object.assign({},e,{angle:r})}function cr(e){let t=G(re(e)),r={},n=!1;for(;t.next();){let{prev:s,curr:i,next:a}=t.get(),l=n&&(i.isWord()||i.isSymbol())&&s&&s.isNumber()&&!a;if(i.isNumber())r.value=Number(i.value),n=!0;else if(l)r.unit=i.value;else break}return r}function Ne(e){return j(e)?[]:Array.isArray(e)?e:[e]}function Ee(e,t=`
`){return(e||[]).join(t)}function S(e,t=1){return j(e)?"":e[e.length-t]}function Dt(e){return e[0]}function dn(e){return JSON.parse(JSON.stringify(e))}function gn(e){return[].concat(e,e)}function fr(e,t){return Array.prototype.flatMap?e.flatMap(t):e.reduce((r,n)=>r.concat(t(n)),[])}function vn(e){return e.filter(t=>!j(t)&&String(t).trim().length)}const yn={\u03C0:Math.PI,gcd:(e,t)=>{for(;t;)[e,t]=[t,e%t];return e}},ot={"^":7,"*":6,"/":6,"\xF7":6,"%":6,"&":5,"|":5,"+":4,"-":4,"<":3,"<<":3,">":3,">>":3,"=":3,"==":3,"\u2264":3,"<=":3,"\u2265":3,">=":3,"\u2260":3,"!=":3,"\u2227":2,"&&":2,"\u2228":2,"||":2,"(":1,")":1};function De(e,t,r=[]){let n=[];for(;e.length;){let{name:s,value:i,type:a}=e.shift();if(a==="variable"){let l=t[i];nt(l)&&(l=Math[i]),nt(l)&&(l=Rt(i,t)),nt(l)&&/^\-\D/.test(i)&&(l=Rt("-1"+i.substr(1),t)),l===void 0&&(l=0),typeof l!="number"&&(r.push(l),xn(r)?(l=0,r=[]):l=De(ge(l),t,r)),n.push(l)}else if(a==="function"){let l=!1;/^\-/.test(s)&&(l=!0,s=s.substr(1));let u=i.map(f=>De(f,t)),o=s.split("."),c;for(;c=o.pop();){if(!c)continue;let f=t[c]||Math[c];u=typeof f=="function"?Array.isArray(u)?f(...u):f(u):0}l&&(u=-1*u),n.push(u)}else if(/\d+/.test(i))n.push(i);else{let l=n.pop(),u=n.pop();n.push(bn(i,Number(u),Number(l)))}}return Number(n[0])||0}function _n(e){let t=String(e),r=[],n="";for(let s=0;s<t.length;++s){let i=t[s];if(ot[i]){let a=S(r);if(i=="="&&a&&/^[!<>=]$/.test(a.value))a.value+=i;else if(/^[|&<>]$/.test(i)&&a&&a.value==i)a.value+=i;else if(i=="-"&&t[s-1]=="e")n+=i;else if(!r.length&&!n.length&&/[+-]/.test(i))n+=i;else{let{type:l,value:u}=a||{};l=="operator"&&!n.length&&/[^()]/.test(i)&&/[^()]/.test(u)?n+=i:(n.length&&(r.push({type:"number",value:n}),n=""),r.push({type:"operator",value:i}))}}else/\S/.test(i)&&(i==","?(r.push({type:"number",value:n}),n="",r.push({type:"comma",value:i})):i=="!"?(r.push({type:"number",value:n}),r.push({type:"operator",value:i}),n=""):n+=i)}return n.length&&r.push({type:"number",value:n}),r}function ge(e){let t=_n(e);const r=[],n=[];for(let s=0;s<t.length;++s){let{type:i,value:a}=t[s],l=t[s+1]||{};if(i=="number")if(l.value=="("&&/[^\d.\-]/.test(a)){let u="",o=[],c=[];for(s+=1;t[s++]!==void 0;){let f=t[s];if(f===void 0)break;let p=f.value;if(p==")"){if(!o.length)break;o.pop(),u+=p}else if(p=="("&&o.push(p),p==","&&!o.length){let m=ge(u);m.length&&c.push(m),u=""}else u+=p}u.length&&c.push(ge(u)),n.push({type:"function",name:a,value:c})}else/[^\d.\-]/.test(a)?n.push({type:"variable",value:a}):n.push({type:"number",value:a});else if(i=="operator")if(a=="(")r.push(a);else if(a==")"){for(;r.length&&S(r)!="(";)n.push({type:"operator",value:r.pop()});r.pop()}else{for(;r.length&&ot[S(r)]>=ot[a];){let u=r.pop();/[()]/.test(u)||n.push({type:"operator",value:u})}r.push(a)}}for(;r.length;)n.push({type:"operator",value:r.pop()});return n}function bn(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"|":return t|r;case"&":return t&r;case"<":return t<r;case">":return t>r;case"^":return Math.pow(t,r);case"\xF7":case"/":return t/r;case"=":case"==":return t==r;case"\u2264":case"<=":return t<=r;case"\u2265":case">=":return t>=r;case"\u2260":case"!=":return t!=r;case"\u2227":case"&&":return t&&r;case"\u2228":case"||":return t||r;case"<<":return t<<r;case">>":return t>>r}}function Rt(e,t){let[r,n,s]=e.match(/([\d.\-]+)(.*)/)||[],i=t[s];return i===void 0?i:typeof i=="number"?Number(n)*i:n*De(ge(i),t)}function xn(e){return e[0]==e[2]&&e[1]==e[3]}function q(e,t){const r=ge(e);return De(r,Object.assign({},yn,t))}const{cos:ve,sin:ye,abs:wn,atan2:pr,PI:bt}=Math,N=un(e=>Ve(We(e),{min:3,max:3600})),Re={circle:()=>N`
    split: 180;
    scale: .99
  `,triangle:()=>N`
    rotate: 30;
    scale: 1.1;
    move: 0 .2
  `,pentagon:()=>N`
    split: 5;
    rotate: 54
  `,hexagon:()=>N`
    split: 6;
    rotate: 30;
    scale: .98
  `,octagon:()=>N`
    split: 8;
    rotat: 22.5;
    scale: .99
  `,star:()=>N`
    split: 10;
    r: cos(5t);
    rotate: -18;
    scale: .99
  `,infinity:()=>N`
    split: 180;
    scale: .99;
    x: cos(t)*.99 / (sin(t)^2 + 1);
    y: x * sin(t)
  `,heart:()=>N`
    split: 180;
    rotate: 180;
    a: cos(t)*13/18 - cos(2t)*5/18;
    b: cos(3t)/18 + cos(4t)/18;
    x: (.75 * sin(t)^3) * 1.2;
    y: (a - b + .2) * -1.1
  `,bean:()=>N`
    split: 180;
    r: sin(t)^3 + cos(t)^3;
    move: -.35 .35;
  `,bicorn:()=>N`
    split: 180;
    x: cos(t);
    y: sin(t)^2 / (2 + sin(t)) - .5
  `,drop:()=>N`
    split: 180;
    rotate: 90;
    scale: .95;
    x: sin(t);
    y: (1 + sin(t)) * cos(t) / 1.6
  `,fish:()=>N`
    split: 240;
    x: cos(t) - sin(t)^2 / sqrt(2) - .04;
    y: sin(2t)/2
  `,whale:()=>N`
    split: 240;
    rotate: 180;
    R: 3.4 * (sin(t)^2 - .5) * cos(t);
    x: cos(t) * R + .75;
    y: sin(t) * R * 1.2
  `,windmill:()=>N`
    split: 18;
    R: seq(.618, 1, 0);
    T: seq(t-.55, t, t);
    x: R * cos(T);
    y: R * sin(T)
  `,vase:()=>N`
    split: 240;
    scale: .3;
    x: sin(4t) + sin(t) * 1.4;
    y: cos(t) + cos(t) * 4.8 + .3
  `,clover:(e=3)=>(e=L(e,3,5),e==4&&(e=2),N`
      split: 240;
      r: cos(${e}t);
      scale: .98
    `),hypocycloid:(e=3)=>{e=L(e,3,5);let t=[0,0,0,.34,.25,.19][e];return N`
      split: 240;
      scale: ${t};
      k: ${e};
      x: (k-1)*cos(t) + cos((k-1)*t);
      y: (k-1)*sin(t) - sin((k-1)*t)
    `},bud:(e=3)=>(e=L(e,3,10),N`
      split: 240;
      scale: .8;
      r: 1 + .2 * cos(${e}t)
    `)};class Ht{constructor(t,r,n){this.x=t,this.y=r,this.extra=n}valueOf(){return this.x+" "+this.y}toString(){return this.valueOf()}}function kn(e,t){typeof arguments[0]=="function"&&(t=e,e={}),t||(t=h=>[ve(h),ye(h)]);let r=e.split||180,n=e.turn||1,s=e.frame,i=e.fill||e["fill-rule"],a=hn(e.direction||e.dir||""),l=e.unit,u=bt*2*n/r,o=[],c,f,p=e.scale===void 0?1:e.scale,m=([h,g,_=0,d=0])=>{if(h=="evenodd"||h=="nonzero")return o.push(new Ht(h,"",""));let[v,w]=Lt(h,-g,p),[Z,X]=Lt(_,-d,p),C=$n(v,w,Z,X,a);l!==void 0&&l!=="%"?l!=="none"&&(v+=l,w+=l):(v=(v+1)*50+"%",w=(w+1)*50+"%"),o.push(new Ht(v,w,C))};(i=="nonzero"||i=="evenodd")&&m([i,"",""]);for(let h=0;h<r;++h){let g=u*h,_=t(g,h);h||(c=_),m(_)}if(s!==void 0){m(c);let h=s/100;n>1&&(h*=2),h==0&&(h=.002);for(let g=0;g<r;++g){let _=-u*g,[d,v,w=0,Z=0]=t(_,g),X=pr(v+Z,d-w),C=[d-h*ve(X),v-h*ye(X)];g||(f=C),m(C)}m(f),m(c)}return o}function $n(e,t,r,n,s){let i=pr(t+n,e-r)*180/bt;return s.direction==="reverse"&&(i-=180),s.direction||(i=90),s.angle&&(i+=s.angle),i}function Sn(e,t,r){let n=-bt/180*r;return[e*ve(n)-t*ye(n),t*ve(n)+e*ye(n)]}function jn(e,t,r){let[n,s=n]=V(r).map(Number);return[e+(n||0),t-(s||0),n,s]}function Lt(e,t,r){let[n,s=n]=V(r).map(Number);return[e*n,t*s]}function Ve(e,{min:t,max:r}){let n=L(parseInt(e.vertices||e.points||e.split)||0,t,r),s=pe(e.x)?"cos(t)":e.x,i=pe(e.y)?"sin(t)":e.y,a=pe(e.r)?"":e.r,{unit:l,value:u}=cr(a);l&&!e[l]&&l!=="t"&&(pe(e.unit)&&(e.unit=l),a=e.r=u),e.degree&&(e.rotate=e.degree),e.origin&&(e.move=e.origin);let o=Object.assign({},e,{split:n});return kn(o,(c,f)=>{let p=Object.assign({},e,{t:c,\u03B8:c,i:f+1,seq(...d){return d.length?d[f%d.length]:""},range(d,v=0){d=Number(d)||0,v=Number(v)||0,d>v&&([d,v]=[v,d]);let w=wn(v-d)/(n-1);return d+w*f}}),m=q(s,p),h=q(i,p),g=0,_=0;if(a){let d=q(a,p);d==0&&(d=1e-5),m=d*ve(c),h=d*ye(c)}return e.rotate&&([m,h]=Sn(m,h,Number(e.rotate)||0)),e.move&&([m,h,g,_]=jn(m,h,e.move)),[m,h,g,_]})}const Nn="http://www.w3.org/2000/svg",En="http://www.w3.org/1999/xlink";function Xt(e,t){return`url("data:image/svg+xml;utf8,${encodeURIComponent(e)+(t?`#${t}`:"")}")`}function Zt(e){const t=`xmlns="${Nn}"`,r=`xmlns:xlink="${En}"`;return e.includes("<svg")||(e=`<svg ${t} ${r}>${e}</svg>`),e.includes("xmlns")||(e=e.replace(/<svg([\s>])/,`<svg ${t} ${r}$1`)),e}const Mn="http://www.w3.org/2000/svg",An="http://www.w3.org/1999/xlink",zn=on();class Me{constructor(t,r=""){if(!t)throw new Error("Tag name is required");this.name=t,this.body=[],this.attrs={},this.isTextNode()&&(this.body=r)}isTextNode(){return this.name==="text-node"}find(t){let r=t.attrs.id,n=t.name;if(Array.isArray(this.body)&&r!==void 0)return this.body.find(s=>s.attrs.id===r&&s.name===n)}append(t){this.isTextNode()||this.body.push(t)}merge(t){for(let[r,n]of Object.entries(t.attrs))this.attrs[r]=n;Array.isArray(t.body)&&this.body.push(...t.body)}attr(t,r){if(!this.isTextNode())return r===void 0?this.attrs[t]:this.attrs[t]=r}toString(){if(this.isTextNode())return Cn(this.body);let t=[""],r=[];for(let[n,s]of Object.entries(this.attrs))t.push(`${n}="${s}"`);for(let n of this.body)r.push(n.toString());return`<${this.name}${t.join(" ")}>${r.join("")}</${this.name}>`}}function hr(e,t){return`${e}:${t};`}function mr(e){const t=e.value.map(r=>r.type==="block"?mr(r):hr(r.name,r.value)).join("");return`${e.name}{${t}}`}function Cn(e){e=String(e);let t=e.startsWith('"')&&e.endsWith('"'),r=e.startsWith("'")&&e.endsWith("'");return t||r?e.substring(1,e.length-1):e}function ct(e,t,r,n){let s;if(t||(t=new Me("root")),e.type==="block")if(e.name==="style"){if(Array.isArray(e.value)){let i=new Me("style"),a=[];for(let l of e.value)l.type==="block"&&a.push(mr(l));i.append(a.join("")),t.append(i)}}else{let i=new Me(e.name);n||(n=i,n.attr("xmlns",Mn));for(let l of e.value){let u=ct(l,i,e,n);u&&(s=u)}if(e.inline){let l=e.value.find(u=>u.type==="statement"&&u.name==="id");l?s=l.value:(s=zn(e.name),i.attr("id",s))}let a=n.find(i);a?a.merge(i):t.append(i)}if(e.type==="statement")if(e.name==="content"){let i=new Me("text-node",e.value);t.append(i)}else if(e.name.startsWith("style ")){let i=(e.name.split("style ")[1]||"").trim();if(i.length){let a=t.attr("style")||"";t.attr("style",a+hr(i,e.value))}}else{let i=e.value;if(i&&i.type==="block"){let a=ct(e.value,n,e,n);i=`url(#${a})`,(e.name==="xlink:href"||e.name==="href")&&(i=`#${a}`)}t.attr(e.name,i),e.name.includes("xlink:")&&n.attr("xmlns:xlink",An)}return r?s:n.toString()}function Yt(e){return ct(e)}function Qt(e){return(...t)=>{let r=[],n=[];for(let a of t){let{unit:l,value:u}=cr(a);l!==void 0&&r.push(l),u!==void 0&&n.push(u)}let s=e(...n),i=r.find(a=>a!==void 0);return i===void 0?s:Array.isArray(s)?s.map(a=>a+i):s+i}}function ft(e){return(...t)=>{let r=t.map(s=>String(s).charCodeAt(0)),n=e(...r);return Array.isArray(n)?n.map(s=>String.fromCharCode(s)):String.fromCharCode(n)}}class Tn{constructor(){this.cache={}}clear(){this.cache={}}set(t,r){if(j(t))return"";let n=this.getKey(t);return this.cache[n]=r}get(t){let r=this.getKey(t);return this.cache[r]}getKey(t){return Vt(typeof t=="string"?t:JSON.stringify(t))}}const Gt=new Tn;function xt(e,t){return(...r)=>{let n=e+r.join("-");return Gt.get(n)||Gt.set(n,t(...r))}}function Ae(e,t){return{type:e,value:t}}function On(e){let t=String(e),r=[],n=[];if(!t.startsWith("[")||!t.endsWith("]"))return r;for(let s=1;s<t.length-1;++s){let i=t[s];if(!(i=="-"&&t[s-1]=="-")){if(i=="-"){n.push(i);continue}if(S(n)=="-"){n.pop();let a=n.pop();r.push(a?Ae("range",[a,i]):Ae("char",i));continue}n.length&&r.push(Ae("char",n.pop())),n.push(i)}}return n.length&&r.push(Ae("char",n.pop())),r}const In=xt("build_range",e=>{let t=On(e);return fr(t,({type:r,value:n})=>{if(r=="char")return n;let[s,i]=n,a=!1;s>i&&([s,i]=[i,s],a=!0);let l=ft(ln)(s,i);return a&&l.reverse(),l})});function ze(e){return(...t)=>e(...fr(t,r=>String(r).startsWith("[")?In(r):r))}class Pn{constructor(t){this.prev=this.next=null,this.data=t}}class Wn{constructor(t=20){this._limit=t,this._size=0}push(t){this._size>=this._limit&&(this.root=this.root.next,this.root.prev=null);let r=new Pn(t);this.root?(r.prev=this.tail,this.tail.next=r,this.tail=r):this.root=this.tail=r,this._size++}last(t=1){let r=this.tail;for(;--t&&r.prev;)r=r.prev;return r.data}}class Ut{constructor(t){this.p=gn(t([151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180]))}grad(t,r,n,s){let i=t&15,a=i<8?r:n,l=i<4?n:i==12||i==14?r:s;return((i&1)==0?a:-a)+((i&2)==0?l:-l)}noise(t,r,n){let{p:s,grad:i}=this,[a,l,u]=[t,r,n].map(v=>Math.floor(v)&255);[t,r,n]=[t,r,n].map(v=>v-Math.floor(v));let[o,c,f]=[t,r,n].map(v=>v*v*v*(v*(v*6-15)+10)),p=s[a]+l,m=s[p]+u,h=s[p+1]+u,g=s[a+1]+l,_=s[g]+u,d=s[g+1]+u;return Y(f,Y(c,Y(o,i(s[m],t,r,n),i(s[_],t-1,r,n)),Y(o,i(s[h],t,r-1,n),i(s[d],t-1,r-1,n))),Y(c,Y(o,i(s[m+1],t,r,n-1),i(s[_+1],t-1,r,n-1)),Y(o,i(s[h+1],t,r-1,n-1),i(s[d+1],t-1,r-1,n-1))))}}function Ft(e,t){let r={},n=!0;for(let s=0;s<e.length;++s){let i=e[s],a=t[s];if(/=/.test(i)){let[l,u]=V(i,{symbol:"=",noSpace:!0});u!==void 0?(t.includes(l)&&(r[l]=u),n=!1):r[a]=i}else n&&(r[a]=i)}return r}function Bn(e,t){let r=[],n,s=[],i=[];for(;e.next();){let{curr:a,next:l}=e.get();a.isSymbol("(")&&!s.length?i.push(a):a.isSymbol(")")&&!s.length&&i.pop();let u=!s.length&&!i.length&&(!l||a.isSymbol(";")||l.isSymbol("}"));if(a.isSymbol("'",'"')&&(a.status==="open"?s.push(a):s.pop(),l.isSymbol("}")&&!s.length&&(u=!0)),!i.length&&!s.length&&a.isSymbol("{")){let o=dr(r);if(!o.length)continue;let c=o.pop(),f=pt(...o,c);for(n=He(wt(e,Le(c,{type:"block",inline:!0,name:c,value:[]})),f);c=o.pop();)n=He(Le(c,{type:"block",name:c,value:[n]}),f);break}if(r.push(a),u)break}return r.length&&!n?t.value=_e(r):n&&(t.value=n),t.origin&&(t.origin.value=t.value),t}function wt(e,t){let r=[],n=[],s=t&&t.type||"",i=[];for(;e.next();){let{prev:a,curr:l,next:u}=e.get();l.isSymbol("(")&&i.push(l.value),l.isSymbol(")")&&i.pop();let o=!u||l.isSymbol("}");if(qe(s)&&o){!u&&r.length&&!l.isSymbol("}")&&typeof r[r.length-1].value=="string"&&(r[r.length-1].value+=";"+l.value),t.value=r;break}else if(l.isSymbol("{")){let c=dr(n);if(!c.length)continue;pt(t.name)&&(c=[_e(n)]);let f=c.pop(),p=pt(...c,t.name,f),m=He(wt(e,Le(f,{type:"block",name:f,value:[]})),p);for(;f=c.pop();)m=He(Le(f,{type:"block",name:f,value:[m]}),p);r.push(m),n=[]}else if(l.isSymbol(":")&&!i.length&&!Vn(a,u)&&n.length){let c=qn(n,g=>g.isSymbol(",")),f={type:"statement",name:"unkown",value:""};c.length>1&&(f.origin={name:c});let p=Bn(e,f),m=V(p.value),h=c.length>1&&m.length===c.length;c.forEach((g,_)=>{let d=Object.assign({},p,{name:g});h&&(d.value=m[_]),r.push(d)}),qe(s)&&(t.value=r),n=[]}else l.isSymbol(";")?r.length&&n.length&&(r[r.length-1].value+=";"+_e(n),n=[]):n.push(l)}return r.length&&qe(s)&&(t.value=r),s?t:r}function Vn(e,t){const r=["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"];let n=e&&e.value,s=t&&t.value;return r.includes(n+":"+s)}function _e(e){return e.filter((t,r)=>!(t.isSymbol(";","}")&&r===e.length-1)).map(t=>t.value).join("")}function He(e,t){let r=e.name||"",[n,...s]=r.split(/#/),i=s[s.length-1];return n&&i&&!t&&(e.name=n,e.value.push({type:"statement",name:"id",value:i})),e}function qn(e,t){let r=[],n=[];return e.forEach(s=>{t(s)?(r.push(_e(n)),n=[]):n.push(s)}),n.length&&r.push(_e(n)),r}function dr(e){let t=[],r=G(e),n;for(;r.next();){let{prev:s,curr:i,next:a}=r.get(),l=s&&a&&i.value==="x"&&s.isNumber()&&a.isNumber();i.isWord()&&!n&&!l?t.push(i.value.trim()):t[t.length-1]=(t[t.length-1]+i.value).trim(),i.isSymbol()?n=!0:i.isSpace()||(n=!1)}return t}function Le(e,t){let r=Object.assign({},t);if(/\*\s*[0-9]/.test(e)){let[n,s]=e.split("*");s&&(r.times=s.trim(),r.pureName=n.trim())}return r}function pt(...e){return e.some(t=>t==="style")}function qe(e){return e==="block"}function gr(e){let t=e&&e.value&&e.value[0];return t&&t.name==="svg"&&qe(t.type)?gr(t):e}function ht(e,t){let r=G(re(e)),n=wt(r,t||{type:"block",name:"svg",value:[]});return gr(n)}const Dn="MmLlHhVvCcSsQqTtAaZz",Rn="mlhvcsqtaz";function Ce(e){let t=G(re(e)),r={},n={commands:[],valid:!0};for(;t.next();){let{curr:s}=t.get();if(!(s.isSpace()||s.isSymbol(",")))if(s.isWord())r.name&&(n.commands.push(r),r={}),r.name=s.value,r.value=[],Dn.includes(s.value)?Rn.includes(s.value)?r.type="relative":r.type="absolute":(r.type="unknown",n.valid=!1);else if(r.value){let i=s.value;s.isNumber()&&(i=Number(s.value)),r.value.push(i)}else r.name||(n.valid=!1)}return r.name&&n.commands.push(r),n}const W={name:"cssd-uniform-time","animation-name":"cssd-uniform-time-animation","animation-duration":31536e6,"animation-iteration-count":"infinite","animation-delay":"0s","animation-direction":"normal","animation-fill-mode":"none","animation-play-state":"running","animation-timing-function":"linear"};W.animation=`
  ${W["animation-duration"]}ms
  ${W["animation-timing-function"]}
  ${W["animation-delay"]}
  ${W["animation-iteration-count"]}
  ${W["animation-name"]}
`;const Hn={name:"cssd-uniform-mousex"},Ln={name:"cssd-uniform-mousey"},Xn={name:"cssd-uniform-width"},Zn={name:"cssd-uniform-height"};function st(e){return ut((t,r,...n)=>{if(!n||!r)return"";let s=P(r()),i=s;/\D/.test(s)&&!/\d+[x-]\d+/.test(s)&&(i=q(s),i===0&&(i=s));let a=Math.random();return an(i,(...l)=>n.map(u=>P(u(...l,a))).join(",")).join(e)})}function ie(e,t,r){return e[t]||(e[t]=new Wn),e[t].push(r),r}function Jt(e){return-1*e}function Yn(e,t,r,n=1){let i=Math.sqrt(2/4)*n,[a,l]=[-i,i];return Y((e-a)/(l-a),t*n,r*n)}const mt=or({i({count:e}){return t=>e},y({y:e}){return t=>e},x({x:e}){return t=>e},z({z:e}){return t=>e},I({grid:e}){return t=>e.count},Y({grid:e}){return t=>e.y},X({grid:e}){return t=>e.x},Z({grid:e}){return t=>e.z},id({x:e,y:t,z:r}){return n=>Be(e,t,r)},n({extra:e}){let t=S(e);return r=>t?t[0]+(Number(r)||0):"@n"},nx({extra:e}){let t=S(e);return r=>t?t[1]+(Number(r)||0):"@nx"},ny({extra:e}){let t=S(e);return r=>t?t[2]+(Number(r)||0):"@ny"},N({extra:e}){let t=S(e);return r=>t?t[3]+(Number(r)||0):"@N"},m:st(","),M:st(" "),\u00B5:st(""),p({context:e,pick:t}){return ze((...r)=>{r.length||(r=e.last_pick_args||[]);let n=t(r);return e.last_pick_args=r,ie(e,"last_pick",n)})},P({context:e,pick:t,position:r}){let n="P-counter"+r;return ze((...s)=>{let i=!0;s.length||(s=e.last_pick_args||[],i=!1);let a=e.last_pick,l=a?a.last(1):"";if(i&&(e[n]||(e[n]={}),l=e[n].last_pick),s.length>1){let o=s.findIndex(c=>c===l);o!==-1&&s.splice(o,1)}let u=t(s);return e.last_pick_args=s,i&&(e[n].last_pick=u),ie(e,"last_pick",u)})},pn({context:e,extra:t,position:r}){let n=S(t),s=n?S(n):"",i="pn-counter"+r+s;return ze((...a)=>{e[i]||(e[i]=0),e[i]+=1;let l=a.length,[u=e[i]]=n||[],o=(u-1)%l,c=a[o];return ie(e,"last_pick",c)})},pd({context:e,extra:t,position:r,shuffle:n}){let s=S(t),i=s?S(s):"",a="pd-counter"+r+i,l="pd-values"+r+i;return ze((...u)=>{e[a]||(e[a]=0),e[a]+=1,e[l]||(e[l]=n(u||[]));let o=u.length,[c=e[a]]=s||[],f=(c-1)%o,p=e[l][f];return ie(e,"last_pick",p)})},lp({context:e}){return(t=1)=>{let r=e.last_pick;return r?r.last(t):""}},r({context:e,rand:t}){return(...r)=>{let s=(r.every(Bt)?ft:Qt)(t)(...r);return ie(e,"last_rand",s)}},rn({x:e,y:t,context:r,position:n,grid:s,extra:i,shuffle:a}){let l="noise-2d"+n,[u,o,c,f,p,m]=S(i)||[],h=u&&f;return(...g)=>{let{from:_=0,to:d=_,frequency:v=1,amplitude:w=1}=Ft(g,["from","to","frequency","amplitude"]);g.length==1&&([_,d]=[0,_]),r[l]||(r[l]=new Ut(a)),v=L(v,0,1/0),w=L(w,0,1/0);let Z=[_,d].every(Bt)?ft:Qt,X=h?r[l].noise((o-1)/p*v,(c-1)/m*v,0):r[l].noise((e-1)/s.x*v,(t-1)/s.y*v,0),le=Z((ae,D)=>Yn(X*w,ae,D,w))(_,d);return ie(r,"last_rand",le)}},lr({context:e}){return(t=1)=>{let r=e.last_rand;return r?r.last(t):""}},noise({context:e,grid:t,position:r,shuffle:n,...s}){let i={i:s.count,I:t.count,x:s.x,X:t.x,y:s.y,Y:t.y,z:s.z,Z:t.z};return(a,l,u=0)=>{let o="raw-noise-2d"+r;return e[o]||(e[o]=new Ut(n)),e[o].noise(q(a,i),q(l,i),q(u,i))}},stripe(){return(...e)=>{let t=e.map(P),r=t.length,n=0,s=[],i;if(!r)return"";t.forEach(l=>{let[u,o]=V(l);o!==void 0?s.push(o):n+=1});let a=s.length?`(100% - ${s.join(" - ")}) / ${n}`:`100% / ${r}`;return t.map((l,u)=>{if(s.length){let[o,c]=V(l);return i=(i?i+" + ":"")+(c!==void 0?c:a),`${o} 0 calc(${i})`}return`${l} 0 ${100/r*(u+1)}%`}).join(",")}},calc(){return e=>q(P(e))},hex(){return e=>parseInt(P(e)).toString(16)},svg:ut((e,...t)=>{let r=t.map(s=>P(s())).join(",");if(!r.startsWith("<")){let s=ht(r);r=Yt(s)}let n=Zt(r);return Xt(n)}),filter:ut((e,...t)=>{let r=t.map(a=>P(a())),n=r.join(","),s=he("filter-");if(r.every(a=>/^[\d.]/.test(a)||/^(\w+)/.test(a)&&!/[{}<>]/.test(a))){let{frequency:a,scale:l=1,octave:u,seed:o=e.seed,blur:c,erode:f,dilate:p}=Ft(r,["frequency","scale","octave","seed","blur","erode","dilate"]);if(n=`
        x: -20%;
        y: -20%;
        width: 140%;
        height: 140%;
      `,j(p)||(n+=`
          feMorphology {
            operator: dilate;
            radius: ${p};
          }
        `),j(f)||(n+=`
          feMorphology {
            operator: erode;
            radius: ${f};
          }
        `),j(c)||(n+=`
          feGaussianBlur {
            stdDeviation: ${c};
          }
        `),!j(a)){let[m,h=m]=V(a);u=u?`numOctaves: ${u};`:"",n+=`
          feTurbulence {
            type: fractalNoise;
            baseFrequency: ${m} ${h};
            seed: ${o};
            ${u}
          }
          feDisplacementMap {
            in: SourceGraphic;
            scale: ${l};
          }
        `}}if(!n.startsWith("<")){let a=ht(n,{type:"block",name:"filter"});n=Yt(a)}let i=Zt(n).replace(/<filter([\s>])/,`<filter id="${s}"$1`);return Xt(i,s)}),var(){return e=>`var(${P(e)})`},ut(){return e=>`var(--${W.name})`},uw(){return e=>`var(--${Xn.name})`},uh(){return e=>`var(--${Zn.name})`},ux(){return e=>`var(--${Hn.name})`},uy(){return e=>`var(--${Ln.name})`},plot({count:e,context:t,extra:r,position:n,grid:s}){let i="offset-points"+n,a=S(r);return l=>{let[u=e,o,c,f=s.count]=a||[];if(!t[i]){let p=We(l);delete p.fill,delete p["fill-rule"],delete p.frame,p.points=f,t[i]=Ve(p,{min:1,max:65536})}return t[i][u-1]}},Plot({count:e,context:t,extra:r,position:n,grid:s}){let i="Offset-points"+n,a=S(r);return l=>{let[u=e,o,c,f=s.count]=a||[];if(!t[i]){let p=We(l);delete p.fill,delete p["fill-rule"],delete p.frame,p.points=f,p.unit=p.unit||"none",t[i]=Ve(p,{min:1,max:65536})}return t[i][u-1]}},shape(){return xt("shape-function",(e="",...t)=>{e=String(e).trim();let r=[];if(e.length)if(typeof Re[e]=="function")r=Re[e](t);else{let n=e,s=t.join(",");s.length&&(n=e+","+s);let i=We(n);r=Ve(i,{min:3,max:3600})}return`polygon(${r.join(",")})`})},doodle(){return e=>e},shaders(){return e=>e},canvas(){return e=>e},pattern(){return e=>e},invert(){return e=>{let t=Ce(e);return t.valid?t.commands.map(({name:r,value:n})=>{switch(r){case"v":return"h"+n.join(" ");case"V":return"H"+n.join(" ");case"h":return"v"+n.join(" ");case"H":return"V"+n.join(" ");default:return r+n.join(" ")}}).join(" "):e}},flipH(){return e=>{let t=Ce(e);return t.valid?t.commands.map(({name:r,value:n})=>{switch(r){case"h":case"H":return r+n.map(Jt).join(" ");default:return r+n.join(" ")}}).join(" "):e}},flipV(){return e=>{let t=Ce(e);return t.valid?t.commands.map(({name:r,value:n})=>{switch(r){case"v":case"V":return r+n.map(Jt).join(" ");default:return r+n.join(" ")}}).join(" "):e}},flip(...e){let t=mt.flipH(...e),r=mt.flipV(...e);return n=>r(t(n))},reverse(...e){return t=>{let r=Ce(t);return r.valid?r.commands.reverse().map(({name:n,value:s})=>n+s.join(" ")).join(" "):t}}},{index:"i",col:"x",row:"y",depth:"z",rand:"r",pick:"p",stripes:"stripe",strip:"stripe",patern:"pattern",flipv:"flipV",fliph:"flipH",t:"ut","svg-filter":"filter","last-rand":"lr","last-pick":"lp",multiple:"m",multi:"m",rep:"\xB5",repeat:"\xB5",ms:"M",s:"I",size:"I",sx:"X","size-x":"X","size-col":"X","max-col":"X",sy:"Y","size-y":"Y","size-row":"Y","max-row":"Y",sz:"Z","size-z":"Z","size-depth":"Z","pick-by-turn":"pn","pick-n":"pn","pick-d":"pd",offset:"plot",Offset:"Plot",point:"plot",Point:"Plot",paint:"canvas"});function vr(e,t=64){const[r,n,s]=[1,t,t*t];let[i,a,l]=(e+"").replace(/\s+/g,"").replace(/[,，xX]+/g,"x").split("x").map(f=>parseInt(f));const u=i==1||a==1?s:n,o=i==1&&a==1?s:r,c={x:L(i||r,1,u),y:L(a||i||r,1,u),z:L(l||r,1,o)};return Object.assign({},c,{count:c.x*c.y*c.z,ratio:c.x/c.y})}const yr={"4a0":[1682,2378],"2a0":[1189,1682],a0:[841,1189],a1:[594,841],a2:[420,594],a3:[297,420],a4:[210,297],a5:[148,210],a6:[105,148],a7:[74,105],a8:[52,74],a9:[37,52],a10:[26,37],b0:[1e3,1414],b1:[707,1e3],b2:[500,707],b3:[353,500],b4:[250,353],b5:[176,250],b6:[125,176],b7:[88,125],b8:[62,88],b9:[44,62],b10:[31,44],b11:[22,32],b12:[16,22],c0:[917,1297],c1:[648,917],c2:[458,648],c3:[324,458],c4:[229,324],c5:[162,229],c6:[114,162],c7:[81,114],c8:[57,81],c9:[40,57],c10:[28,40],c11:[22,32],c12:[16,22],d0:[764,1064],d1:[532,760],d2:[380,528],d3:[264,376],d4:[188,260],d5:[130,184],d6:[92,126],letter:[216,279],postcard:[100,148],poster:[390,540]},Qn={portrait:"p",pt:"p",p:"p",landscape:"l",ls:"l",l:"l"},Gn="mm";function Un(e,t){e=String(e).toLowerCase();let[r,n]=yr[e]||[];return Qn[t]=="p"&&([n,r]=[r,n]),[n,r].map(s=>s+Gn)}function Fn(e){return!!yr[e]}let Te=[];function Jn(e){if(!Te.length){let t=new Set;if(typeof document<"u")for(let r in document.head.style)r.startsWith("-")||t.add(r.replace(/[A-Z]/g,"-$&").toLowerCase());t.has("grid-gap")||t.add("grid-gap"),Te=Array.from(t)}return e instanceof RegExp?Te.filter(t=>e.test(t)):Te}function _r(e){let t=new RegExp(`\\-?${e}\\-?`);return Jn(t).map(r=>r.replace(t,"")).reduce((r,n)=>(r[n]=n,r),{})}const Kn=_r("webkit"),es=_r("moz");function br(e,t){return Kn[e]?`-webkit-${t} ${t}`:es[e]?`-moz-${t} ${t}`:t}const ts={center:"50%",left:"0%",right:"100%",top:"50%",bottom:"50%"},rs={center:"50%",top:"0%",bottom:"100%",left:"50%",right:"50%"},Oe=or({size(e,{is_special_selector:t,grid:r}){let[n,s=n]=V(e);Fn(n)&&([n,s]=Un(n,s));let i=`
      width: ${n};
      height: ${s};
    `;return t?(n==="auto"||s==="auto")&&(i+=`aspect-ratio: ${r.ratio};`):i+=`
        --internal-cell-width: ${n};
        --internal-cell-height: ${s};
      `,i},position(e,{extra:t}){let[r,n="50%"]=V(e);r=ts[r]||r,n=rs[n]||n;const s="var(--internal-cell-width, 25%)",i="var(--internal-cell-height, 25%)";return`
      position: absolute;
      left: ${r};
      top: ${n};
      width: ${s};
      height: ${i};
      margin-left: calc(${s} / -2);
      margin-top: calc(${i} / -2);
      grid-area: unset;
      --plot-angle: ${t||0};
      transform: rotate(${t||0}deg);
    `},grid(e,t){let[r,n]=V(e,{symbol:"/",noSpace:!0});return{grid:vr(r,t.max_grid),size:n?this.size(n,t):""}},seed(e){return e},shape:xt("shape-property",e=>{let[t,...r]=V(e);if(typeof Re[t]!="function")return"";let n="clip-path",s=Re[t](...r),i=`${n}: polygon(${s.join(",")});`;return br(n,i)+"overflow: hidden;"}),use(e){if(e.length>2)return e}},{place:"position","place-cell":"position",offset:"position"}),U={even:e=>!(e%2),odd:e=>!!(e%2)};function it(e,t,r){for(let n=0;n<=r;++n)if(q(e,{n})==t)return!0}const ns={at({x:e,y:t}){return(r,n)=>e==r&&t==n},nth({count:e,grid:t}){return(...r)=>r.some(n=>U[n]?U[n](e):it(n,e,t.count))},row({y:e,grid:t}){return(...r)=>r.some(n=>U[n]?U[n](e):it(n,e,t.y))},col({x:e,grid:t}){return(...r)=>r.some(n=>U[n]?U[n](e):it(n,e,t.x))},even({count:e,grid:t,x:r,y:n}){return s=>U.odd(r+n)},odd({count:e,grid:t,x:r,y:n}){return s=>U.even(r+n)},random({random:e,count:t,x:r,y:n,grid:s}){return(i=.5)=>/\D/.test(i)?e()<q("("+i+")",{x:r,X:s.x,y:n,Y:s.y,i:t,I:s.count,random:e}):e()<i},match({count:e,grid:t,x:r,y:n,random:s}){return i=>!!q("("+i+")",{x:r,X:t.x,y:n,Y:t.y,i:e,I:t.count,random:s})}};var fe=globalThis,be=Math,Xe=[],Q=256,xr=6,ss=52,is="random",ls=be.pow(Q,xr),wr=be.pow(2,ss),as=wr*2,te=Q-1,Kt;function Ie(e,t,r){var n=[];t=t==!0?{entropy:!0}:t||{};var s=dt(kr(t.entropy?[e,xe(Xe)]:e==null?os():e,3),n),i=new us(n),a=function(){for(var l=i.g(xr),u=ls,o=0;l<wr;)l=(l+o)*Q,u*=Q,o=i.g(1);for(;l>=as;)l/=2,u/=2,o>>>=1;return(l+o)/u};return a.int32=function(){return i.g(4)|0},a.quick=function(){return i.g(4)/4294967296},a.double=a,dt(xe(i.S),Xe),(t.pass||r||function(l,u,o,c){return c&&(c.S&&er(c,i),l.state=function(){return er(i,{})}),o?(be[is]=l,u):l})(a,s,"global"in t?t.global:this==be,t.state)}function us(e){var t,r=e.length,n=this,s=0,i=n.i=n.j=0,a=n.S=[];for(r||(e=[r++]);s<Q;)a[s]=s++;for(s=0;s<Q;s++)a[s]=a[i=te&i+e[s%r]+(t=a[s])],a[i]=t;(n.g=function(l){for(var u,o=0,c=n.i,f=n.j,p=n.S;l--;)u=p[c=te&c+1],o=o*Q+p[te&(p[c]=p[f=te&f+u])+(p[f]=u)];return n.i=c,n.j=f,o})(Q)}function er(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function kr(e,t){var r=[],n=typeof e,s;if(t&&n=="object")for(s in e)try{r.push(kr(e[s],t-1))}catch{}return r.length?r:n=="string"?e:e+"\0"}function dt(e,t){for(var r=e+"",n,s=0;s<r.length;)t[te&s]=te&(n^=t[te&s]*19)+r.charCodeAt(s++);return xe(t)}function os(){try{var e;return Kt&&(e=Kt.randomBytes)||(e=new Uint8Array(Q),(fe.crypto||fe.msCrypto).getRandomValues(e)),xe(e)}catch{var t=fe.navigator,r=t&&t.plugins;return[+new Date,fe,r,fe.screen,xe(Xe)]}}function xe(e){return String.fromCharCode.apply(0,e)}dt(be.random(),Xe);function F(e){return/^\:(host|doodle)/.test(e)}function gt(e){return/^\:(container|parent)/.test(e)}function lt(e){return F(e)||gt(e)}const $r={};for(let e of Object.getOwnPropertyNames(Math))$r[e]=()=>(...t)=>typeof Math[e]=="number"?Math[e]:(t=t.map(r=>q(P(r))),Math[e](...t));class cs{constructor(t){this.tokens=t,this.rules={},this.props={},this.keyframes={},this.grid=null,this.seed=null,this.is_grid_defined=!1,this.coords=[],this.doodles={},this.canvas={},this.pattern={},this.shaders={},this.reset(),this.custom_properties={},this.uniforms={}}reset(){this.styles={host:"",container:"",cells:"",keyframes:""},this.coords=[],this.doodles={},this.canvas={},this.pattern={},this.shaders={};for(let t in this.rules)t.startsWith("#c")&&delete this.rules[t]}add_rule(t,r){let n=this.rules[t];n||(n=this.rules[t]=[]),n.push.apply(n,Ne(r))}pick_func(t){return mt[t]||$r[t]}apply_func(t,r,n){let s=t(...Ne(r)),i=[];return n.forEach(l=>{let u=typeof l.value,o=u==="number"||u==="string";if(!l.cluster&&o)i.push(...V(l.value,{noSpace:!0}));else if(typeof l=="function")i.push(l);else if(!j(l.value)){let c=P(l.value);i.push(c)}}),i=vn(i),s(...Ne(i))}compose_aname(...t){return t.join("-")}compose_selector({x:t,y:r,z:n},s=""){return`#${Be(t,r,n)}${s}`}is_composable(t){return["doodle","shaders","canvas","pattern"].includes(t)}read_var(t,r){let n=r.count,s=Object.assign({},this.custom_properties.host,this.custom_properties.container,this.custom_properties[n]);if(s[t]!==void 0){let i=String(s[t]).trim();return i[0]=="("&&i[i.length-1]===")"&&(i=i.substring(1,i.length-1)),i.replace(/;+$/g,"")}return t}compose_argument(t,r,n=[],s){r.extra||(r.extra=[]),r.extra.push(n);let i=t.map(a=>{if(a.type==="text")return/^\-\-\w/.test(a.value)?s&&s.name==="@var"?a.value:this.read_var(a.value,r):a.value;if(a.type==="func"){let l=a.name.substr(1),u=this.pick_func(l);if(typeof u=="function"){if(this.check_uniforms(l),this.is_composable(l)){let f=P((a.arguments[0]||[])[0]);if(!j(f))switch(l){case"doodle":return this.compose_doodle(this.inject_variables(f,r.count));case"shaders":return this.compose_shaders(f,r);case"canvas":return this.compose_canvas(f,a.arguments.slice(1));case"pattern":return this.compose_pattern(f,r)}}r.position=a.position;let o=a.arguments.map(f=>u.lazy?(...p)=>this.compose_argument(f,r,p,a):this.compose_argument(f,r,n,a));return this.apply_func(u,r,o)}else return a.name}});return r.extra.pop(),{cluster:t.cluster,value:i.length>=2?{value:i.join("")}:i[0]}}compose_doodle(t){let r=he("doodle");return this.doodles[r]=t,"${"+r+"}"}compose_shaders(t,{x:r,y:n,z:s}){let i=he("shader");return this.shaders[i]={id:"--"+i,shader:t,cell:Be(r,n,s)},"${"+i+"}"}compose_pattern(t,{x:r,y:n,z:s}){let i=he("pattern");return this.pattern[i]={id:"--"+i,code:t,cell:Be(r,n,s)},"${"+i+"}"}compose_canvas(t,r=[]){let n=t,s=r.map(a=>P(a[0])).join(",");s.length&&(n=t+","+s);let i=he("canvas");return this.canvas[i]={code:n},"${"+i+"}"}check_uniforms(t){switch(t){case"ut":case"t":this.uniforms.time=!0;break;case"ux":this.uniforms.mousex=!0;break;case"uy":this.uniforms.mousey=!0;break;case"uw":this.uniforms.width=!0;break;case"uh":this.uniforms.height=!0;break}}inject_variables(t,r){let n=Object.assign({},this.custom_properties.host,this.custom_properties.container,this.custom_properties[r]),s=[];for(let[i,a]of Object.entries(n))s.push(`${i}: ${a};`);return s=s.join(""),s.length?`:doodle { ${s} }`+t:t}compose_value(t,r){if(!Array.isArray(t))return{value:"",extra:""};let n="";return{value:t.reduce((i,a)=>{switch(a.type){case"text":{i+=a.value;break}case"func":{let l=a.name.substr(1),u=this.pick_func(l);if(typeof u=="function")if(this.check_uniforms(l),this.is_composable(l)){let o=P((a.arguments[0]||[])[0]);if(!j(o))switch(l){case"doodle":i+=this.compose_doodle(this.inject_variables(o,r.count));break;case"shaders":i+=this.compose_shaders(o,r);break;case"pattern":i+=this.compose_pattern(o,r);break;case"canvas":i+=this.compose_canvas(o,a.arguments.slice(1));break}}else{r.position=a.position;let o=a.arguments.map(f=>u.lazy?(...p)=>this.compose_argument(f,r,p,a):this.compose_argument(f,r,[],a)),c=this.apply_func(u,r,o);j(c)||(i+=c,c.extra&&(n=c.extra))}else i+=a.name}}return i},""),extra:n}}compose_rule(t,r,n){let s=Object.assign({},r),i=t.property,a;if(i==="@seed")return"";let l=t.value.reduce((c,f)=>{let p=this.compose_value(f,s);return p&&(p.value&&c.push(p.value),p.extra&&(a=p.extra)),c},[]),u=l.join(", ");if(/^animation(\-name)?$/.test(i)){if(this.props.has_animation=!0,F(n)){let c=W[i];c&&u&&(u=c+","+u)}if(s.count>1){let{count:c}=s;switch(i){case"animation-name":{u=l.map(f=>this.compose_aname(f,c)).join(", ");break}case"animation":u=l.map(f=>{let p=(f||"").split(/\s+/);return p[0]=this.compose_aname(p[0],c),p.join(" ")}).join(", ")}}}i==="content"&&(/["']|^none$|^(var|counter|counters|attr|url)\(/.test(u)||(u=`'${u}'`)),i==="transition"&&(this.props.has_transition=!0);let o=`${i}: ${u};`;if(o=br(i,o),i==="clip-path"&&(o+=";overflow: hidden;"),(i==="width"||i==="height")&&(lt(n)||(o+=`--internal-cell-${i}: ${u};`)),i==="background"&&(u.includes("shader")||u.includes("canvas")||u.includes("pattern"))&&(o+="background-size: 100% 100%;"),/^\-\-/.test(i)){let c=r.count;gt(n)&&(c="container"),F(n)&&(c="host"),this.custom_properties[c]||(this.custom_properties[c]={}),this.custom_properties[c][i]=u}if(/^@/.test(i)&&Oe[i.substr(1)]){let c=i.substr(1),f=Oe[c](u,{is_special_selector:lt(n),grid:s.grid,max_grid:s.max_grid,extra:a});switch(c){case"grid":{F(n)?o=f.size||"":(o="",this.is_grid_defined||(f=Oe[c](u,{is_special_selector:!0,grid:s.grid,max_grid:s.max_grid}),this.add_rule(":host",f.size||""))),this.grid=s.grid,this.is_grid_defined=!0;break}case"seed":{o="";break}case"place-cell":case"place":case"position":case"offset":{F(n)||(o=f);break}case"use":{t.value.length&&this.compose(s,t.value),o="";break}default:o=f}}return o}get_raw_value(t){let r=t.raw();j(r)&&(r="");let[n,...s]=r.split(t.property);return s=s.join(t.property).replace(/^\s*:\s*/,"").replace(/[;}<]$/,"").trim().replace(/[;}<]$/,""),s}pre_compose_rule(t,r){let n=Object.assign({},r),s=t.property;switch(s){case"@grid":{let a=t.value.reduce((o,c)=>{let f=this.compose_value(c,n);return f&&f.value&&o.push(f.value),o},[]).join(", "),l=s.substr(1),u=Oe[l](a,{max_grid:r.max_grid});this.grid=u.grid;break}case"@use":{t.value.length&&this.pre_compose(n,t.value);break}}}pre_compose(t,r){j(this.seed)&&((r||this.tokens).forEach(n=>{if(n.type==="rule"&&n.property==="@seed"&&(this.seed=this.get_raw_value(n)),n.type==="pseudo"&&F(n.selector))for(let s of Ne(n.styles))s.type==="rule"&&s.property==="@seed"&&(this.seed=this.get_raw_value(s))}),j(this.seed)||t.update_random(this.seed)),(r||this.tokens).forEach(n=>{switch(n.type){case"rule":{this.pre_compose_rule(n,t);break}case"pseudo":{F(n.selector)&&(n.styles||[]).forEach(s=>{this.pre_compose_rule(s,t)});break}}})}compose(t,r,n){this.coords.push(t),(r||this.tokens).forEach((s,i)=>{if(s.skip||n&&this.grid)return!1;switch(s.type){case"rule":{this.add_rule(this.compose_selector(t),this.compose_rule(s,t));break}case"pseudo":{s.selector.startsWith(":doodle")&&(s.selector=s.selector.replace(/^\:+doodle/,":host"));let a=lt(s.selector);a&&(s.skip=!0),s.selector.split(",").forEach(l=>{let u=s.styles.map(c=>this.compose_rule(c,t,l)),o=a?l:this.compose_selector(t,l);this.add_rule(o,u)});break}case"cond":{let a=ns[s.name.substr(1)];if(a){let l=s.arguments.map(o=>this.compose_argument(o,t));this.apply_func(a,t,l)&&this.compose(t,s.styles)}break}case"keyframes":this.keyframes[s.name]||(this.keyframes[s.name]=a=>`
              ${Ee(s.steps.map(l=>`
                ${l.name} {
                  ${Ee(l.styles.map(u=>this.compose_rule(u,a)))}
                }
              `))}
            `)}})}output(){for(let[t,r]of Object.entries(this.rules))if(gt(t))this.styles.container+=`
          .container {
            ${Ee(r)}
          }
        `;else{let n=F(t)?"host":"cells",s=Ee(r).trim(),i=n==="host"?`${t}, .host`:t;this.styles[n]+=`${i} { ${s} }`}return this.uniforms.time&&(this.styles.container+=`
        :host, .host {
          animation: ${W.animation};
        }
      `,this.styles.keyframes+=`
       @keyframes ${W["animation-name"]} {
         from { --${W.name}: 0 }
         to { --${W.name}: ${W["animation-duration"]/10} }
       }
      `),this.coords.forEach((t,r)=>{for(let[n,s]of Object.entries(this.keyframes)){let i=this.compose_aname(n,t.count);this.styles.keyframes+=`
          ${sn(r===0,`@keyframes ${n} { ${s(t)} }`)}
          @keyframes ${i} {
            ${s(t)}
          }
        `}}),{props:this.props,styles:this.styles,grid:this.grid,seed:this.seed,random:this.random,doodles:this.doodles,shaders:this.shaders,canvas:this.canvas,pattern:this.pattern,uniforms:this.uniforms}}}function fs(e,t,r,n,s){let i=new cs(e),a=s||Ie(String(r)),l={};function u(h){a=Ie(String(h))}function o(h=0,g){return arguments.length==1&&([h,g]=[0,h]),Y(a(),h,g)}function c(...h){let g=h.reduce((_,d)=>_.concat(d),[]);return g[~~(a()*g.length)]}function f(h){let g=[...h],_=h.length;for(;_;){let d=~~(a()*_--),v=g[_];g[_]=g[d],g[d]=v}return g}i.pre_compose({x:1,y:1,z:1,count:1,context:{},grid:{x:1,y:1,z:1,count:1},random:a,rand:o,pick:c,shuffle:f,max_grid:n,update_random:u});let{grid:p,seed:m}=i.output();if(p&&(t=p),m?(m=String(m),a=Ie(m)):m=r,j(m)&&(m=Date.now(),a=Ie(m)),m=String(m),i.seed=m,i.random=a,i.reset(),t.z==1)for(let h=1,g=0;h<=t.y;++h)for(let _=1;_<=t.x;++_)i.compose({x:_,y:h,z:1,count:++g,grid:t,context:l,rand:o,pick:c,shuffle:f,random:a,seed:m,max_grid:n});else for(let h=1,g=0;h<=t.z;++h)i.compose({x:1,y:1,z:h,count:++g,grid:t,context:l,rand:o,pick:c,shuffle:f,random:a,seed:m,max_grid:n});return i.output()}function ps(e){let t=G(re(e));return Sr(t)}function Sr(e){let t=[];for(;e.next();){let{curr:r,next:n}=e.get();if(r.value==="var"){if(n&&n.isSymbol("(")){e.next();let s=hs(e);ms(s.name)&&t.push(s)}}else if(t.length&&!r.isSymbol(","))break}return t}function hs(e){let t={},r=[];for(;e.next();){let{curr:n,next:s}=e.get();if(n.isSymbol(")",";")&&!t.name){t.name=tr(r);break}else n.isSymbol(",")?(t.name===void 0&&(t.name=tr(r),r=[]),t.name&&(t.fallback=Sr(e))):r.push(n)}return t}function tr(e){return e.map(t=>t.value).join("")}function ms(e){return!(e===void 0||e.length<=2||e.substr(2).startsWith("-")||!e.startsWith("--"))}function vt(e,t){let r="";if(e.type==="block"){let n=Array.isArray(e.value)&&e.value[0]&&e.value[0].inline;if(e.times?r+="@M"+e.times+"("+e.pureName+"{":r+=e.name+(n?" ":"{"),Array.isArray(e.value)&&e.value.length){let s="";for(let i of e.value)r+=vt(i,s),i.origin&&(s=i.origin.name.join(","))}e.times?r+="})":n||(r+="}")}else if(e.type==="statement"){let n=e.origin&&t===e.origin.name.join(","),s=e.origin?e.origin.name.join(","):e.name,i=e.origin?e.origin.value:e.value;n||(r+=i&&i.type?s+":"+vt(i):s+":"+i+";")}return r}function ds(e){return vt(e).trim()}const B={func(e=""){return{type:"func",name:e,arguments:[]}},argument(){return{type:"argument",value:[]}},text(e=""){return{type:"text",value:e}},pseudo(e=""){return{type:"pseudo",selector:e,styles:[]}},cond(e=""){return{type:"cond",name:e,styles:[],arguments:[]}},rule(e=""){return{type:"rule",property:e,value:[]}},keyframes(e=""){return{type:"keyframes",name:e,steps:[]}},step(e=""){return{type:"step",name:e,styles:[]}}},z={white_space(e){return/[\s\n\t]/.test(e)},line_break(e){return/\n/.test(e)},number(e){return!isNaN(e)},pair(e){return['"',"(",")","'"].includes(e)},pair_of(e,t){return{'"':'"',"'":"'","(":")"}[e]==t}},Ze={\u03C0:Math.PI,"\u220F":Math.PI};function rr(e){return["@canvas","@shaders","@doodle"].includes(e)}function jr(e=""){let t=0,r=1,n=1;return{curr(s=0){return e[t+s]},end(){return e.length<=t},info(){return{index:t,col:r,line:n}},index(s){return s===void 0?t:t=s},range(s,i){return e.substring(s,i)},next(){let s=e[t++];return s==`
`?(n++,r=0):r++,s}}}function gs(e,{col:t,line:r}){console.warn(`(at line ${r}, column ${t}) ${e}`)}function vs(e){return e.trim().length?z.number(+e)?+e:e.trim():e}function kt(e){return function(t,r){let n=t.index(),s="";for(;!t.end();){let i=t.next();if(e(i))break;s+=i}return r&&t.index(n),s}}function Nr(e,t){return kt(n=>/[^\w@]/.test(n))(e,t)}function ys(e){return kt(t=>/[\s\{]/.test(t))(e)}function Er(e,t){return kt(n=>z.line_break(n)||n=="{")(e,t)}function _s(e,t){let r,n=B.step();for(;!e.end()&&(r=e.curr())!="}";){if(z.white_space(r)){e.next();continue}else if(!n.name.length)n.name=zr(e);else if(n.styles.push(Qe(e,t)),e.curr()=="}")break;e.next()}return n}function bs(e,t){const r=[];let n;for(;!e.end()&&(n=e.curr())!="}";){if(z.white_space(n)){e.next();continue}else r.push(_s(e,t));e.next()}return r}function xs(e,t){let r=B.keyframes(),n;for(;!e.end()&&(n=e.curr())!="}";){if(r.name.length){if(n=="{"||e.curr(-1)=="{"){e.next(),r.steps=bs(e,t);break}}else{if(Nr(e),r.name=ys(e),!r.name.length){gs("missing keyframes name",e.info());break}continue}e.next()}return r}function Ye(e,t={}){for(e.next();!e.end();){let r=e.curr();if(t.inline){if(r==`
`)break}else if((r=e.curr())=="*"&&e.curr(1)=="/")break;e.next()}t.inline||(e.next(),e.next())}function ws(e){for(e.next();!e.end()&&e.curr()!=">";)e.next()}function ks(e){let t="",r;for(;!e.end()&&(r=e.curr())!=":";)z.white_space(r)||(t+=r),e.next();return t}function yt(e,t,r){let n=[],s=[],i=[],a="",l,u="";for(;!e.end();){l=e.curr();let o=e.index();if(/[\('"`]/.test(l)&&e.curr(-1)!=="\\")i.length?(l!=="("&&S(i)==="("&&i.pop(),l!="("&&l===S(i)?i.pop():i.push(l)):i.push(l),a+=l;else if(l=="@"&&!r)s.length||(a=a.trimLeft()),a.length&&(s.push(B.text(a)),a=""),s.push(Mr(e));else if(r&&/[)]/.test(l)||!r&&/[,)]/.test(l))if(i.length)l==")"&&S(i)==="("&&i.pop(),a+=l;else{if(a.length&&(s.length?/\S/.test(a)&&s.push(B.text(a)):s.push(B.text(vs(a))),a.startsWith("\xB1")&&!r)){let c=a.substr(1),f=dn(s);S(f).value="-"+c,n.push(at(f)),S(s).value=c}if(n.push(at(s)),[s,a]=[[],""],l==")")break}else Ze[l]&&!/[0-9]/.test(e.curr(-1))&&(l=Ze[l]),a+=l;if(t&&(e.curr(1)==")"||!/[0-9a-zA-Z_\-.]/.test(e.curr()))&&!i.length){s.length&&n.push(at(s));break}else u+=e.range(o,e.index()+1),e.next()}return[$s(n),u]}function $s(e){let t=S(e[0]);return t&&t.type==="text"&&!String(t.value).trim().length&&(e[0]=e[0].slice(0,-1)),e}function at(e){let t=e.map(s=>{if(s.type=="text"&&typeof s.value=="string"){let i=String(s.value);i.includes("`")&&(s.value=i=i.replace(/`/g,'"')),s.value=i}return s}),r=Dt(t)||{},n=S(t)||{};if(r.type=="text"&&n.type=="text"){let s=Dt(r.value),i=S(n.value);typeof r.value=="string"&&typeof n.value=="string"&&z.pair_of(s,i)&&(r.value=r.value.slice(1),n.value=n.value.slice(0,n.value.length-1),t.cluster=!0)}return t}function Ss(e){let t="",r="";if(/\D$/.test(e)&&!/\d+[x-]\d+/.test(e)||Math[e.substr(1)])return{fname:e,extra:r};for(let n=e.length-1;n>=0;n--){let s=e[n],i=e[n-1],a=e[n+1];if(/[\d.]/.test(s)||(s=="x"||s=="-")&&/\d/.test(i)&&/\d/.test(a))r=s+r;else{t=e.substring(0,n+1);break}}return{fname:t,extra:r}}function js(e){let t=JSON.stringify(e);return t.includes("pureName")&&t.includes("times")}function Mr(e){let t=B.func(),r="@",n,s=!1;for(e.next();!e.end();){n=e.curr();let l=n=="."&&e.curr(1)=="@",u=e.curr(1);if(n=="("||l){s=!0,e.next();let[o,c]=yt(e,l,rr(r));if(r==="@svg"&&/\d\s*{/.test(c)){let f=ht(c);if(js(f)){let p=ds(f);p+=")",o=yt(jr(p),l,rr(r))[0]}}t.arguments=o;break}else if(!s&&u!=="("&&!/[0-9a-zA-Z_\-.]/.test(u)){r+=n;break}else r+=n;e.next()}let{fname:i,extra:a}=Ss(r);return t.name=i,a.length&&t.arguments.unshift([{type:"text",value:a}]),t.position=e.info().index,t}function Ar(e){let t=B.text(),r=0,n=!0,s;const i=[],a=[];for(i[r]=[];!e.end();){if(s=e.curr(),n&&z.white_space(s)){e.next();continue}else n=!1;if(s==`
`&&!z.white_space(e.curr(-1)))t.value+=" ";else if(s==","&&!a.length)t.value.length&&(i[r].push(t),t=B.text()),i[++r]=[],n=!0;else if(/[;}<]/.test(s)){t.value.length&&(i[r].push(t),t=B.text());break}else s=="@"?(t.value.length&&(i[r].push(t),t=B.text()),i[r].push(Mr(e))):(!z.white_space(s)||!z.white_space(e.curr(-1)))&&(s=="("&&a.push(s),s==")"&&a.pop(),Ze[s]&&!/[0-9]/.test(e.curr(-1))&&(s=Ze[s]),t.value+=s);e.next()}return t.value.length&&i[r].push(t),i}function zr(e){let t="",r;for(;!e.end()&&(r=e.curr())!="{";)z.white_space(r)||(t+=r),e.next();return t}function Ns(e){let t={name:"",arguments:[]},r;for(;!e.end();){if((r=e.curr())=="(")e.next(),t.arguments=yt(e)[0];else{if(/[){]/.test(r))break;z.white_space(r)||(t.name+=r)}e.next()}return t}function Cr(e,t){let r=B.pseudo(),n;for(;!e.end();){if(n=e.curr(),n=="/"&&e.curr(1)=="*")Ye(e);else{if(n=="}")break;if(z.white_space(n)){e.next();continue}else if(!r.selector)r.selector=zr(e);else{let s=Qe(e,t);if(s.property=="@use"?r.styles=r.styles.concat(s.value):r.styles.push(s),e.curr()=="}")break}}e.next()}return r}function Qe(e,t){let r=B.rule(),n,s=e.index();for(;!e.end();){if(n=e.curr(),n=="/"&&e.curr(1)=="*")Ye(e);else{if(n==";")break;if(r.property.length){r.value=Ar(e);break}else if(r.property=ks(e),r.property=="@use"){r.value=Es(e,t);break}}e.next()}let i=e.index();return r.raw=()=>e.range(s,i).trim(),r}function Tr(e,t){let r=B.cond(),n;for(;!e.end();){if(n=e.curr(),n=="/"&&e.curr(1)=="*")Ye(e);else{if(n=="}")break;if(!r.name.length)Object.assign(r,Ns(e));else if(n==":"){let s=Cr(e);s.selector&&r.styles.push(s)}else if(n=="@"&&!Er(e,!0).includes(":"))r.styles.push(Tr(e));else if(!z.white_space(n)){let s=Qe(e,t);if(s.property&&r.styles.push(s),e.curr()=="}")break}}e.next()}return r}function nr(e,t){let r="";return e&&e.get_variable&&(r=e.get_variable(t)),r}function Or(e,t){e.forEach&&e.forEach(r=>{if(r.type=="text"&&r.value){let n=ps(r.value);r.value=n.reduce((s,i)=>{let a="",l="",u;a=nr(t,i.name),!a&&i.fallback&&i.fallback.every(o=>{if(l=nr(t,o.name),l)return a=l,!1});try{u=Ir(a,t)}catch{}return u&&s.push.apply(s,u),s},[])}r.type=="func"&&r.arguments&&r.arguments.forEach(n=>{Or(n,t)})})}function Es(e,t){return e.next(),(Ar(e)||[]).reduce((n,s)=>{Or(s,t);let[i]=s;return i.value&&i.value.length&&n.push(...i.value),n},[])}function Ir(e,t){const r=jr(e),n=[];for(;!r.end();){let s=r.curr();if(z.white_space(s)){r.next();continue}else if(s=="/"&&r.curr(1)=="*")Ye(r);else if(s==":"){let i=Cr(r,t);i.selector&&n.push(i)}else if(s=="@"&&Nr(r,!0)==="@keyframes"){let i=xs(r,t);n.push(i)}else if(s=="@"&&!Er(r,!0).includes(":")){let i=Tr(r,t);i.name.length&&n.push(i)}else if(s=="<")ws(r);else if(!z.white_space(s)){let i=Qe(r,t);i.property&&n.push(i)}r.next()}return n}function Ms(e){let t=fs(Ir(`background: @svg(${e});`),vr("1x1")),r=t&&t.styles&&t.styles.cells||"",n=r.substring(52,r.length-5);return decodeURIComponent(n)}function As(e){let t;return{c(){t=O("div"),this.h()},l(r){t=I(r,"DIV",{class:!0}),E(t).forEach($),this.h()},h(){x(t,"class","svelte-e52kha")},m(r,n){we(r,t,n),e[3](t)},p:Pe,i:Pe,o:Pe,d(r){r&&$(t),e[3](null)}}}function zs(e,t,r){let{code:n=""}=t,s,i,a=Wr();Br(async()=>{const{CodeJar:o}=await Tt(()=>import("../../chunks/codejar-f2b93de5.js"),[],import.meta.url),c=await Tt(()=>import("../../chunks/prism-1372a240.js").then(p=>p.p),[],import.meta.url);function f(p){p.innerHTML=c.highlight(p.textContent,c.languages.css)}s&&(i=new o(s,f),i.updateCode(n),i.onUpdate(p=>{r(1,n=p),a("input",p)}))});function l(o){i&&(r(1,n=o),i.updateCode(n))}Vr(()=>{i&&i.destroy()});function u(o){_t[o?"unshift":"push"](()=>{s=o,r(0,s)})}return e.$$set=o=>{"code"in o&&r(1,n=o.code)},[s,n,l,u]}class Cs extends lr{constructor(t){super(),ar(this,t,zs,As,ur,{code:1,updateCode:2})}get updateCode(){return this.$$.ctx[2]}}const Ts={grid:ee(`
    svg {
      viewBox: .5 .5 10 10;
      stroke: #1B2D37;
      stroke-width: .04;

      circle*10x10 {
        fill: @p(yellow, blueviolet, deeppink);
        cx, cy: @nx, @ny;
        r: @r(.05, .48);
        style animation: scale @r(2s) reverse;
      }

      style {
        @keyframes scale {
          to { r: 0 }
        }
      }
    }
  `),basic:ee(`
    svg {
      viewBox: 0 0 10 10;
      stroke: black;
      stroke-width: .1;
      rect {
        x: 8;
        y: 8;
        width: 1;
        height: 1;
        fill: yellow;
        style transform-box: fill-box;
        transform-origin: center;
        transform: rotate(45);
      }
      circle {
        fill: deepskyblue;
        cx: 4;
        cy: 4;
        r: 3
      }
    }
  `),snowflake:ee(`
    svg {
      viewBox: -50 -50 100 100;
      path*6 {
        transform: rotate(@calc(@n*60));
        stroke-linecap: round;
        stroke: black;
        d: M 0 0 0 44
           @M2x3(M 0 @calc(-9*@ny)
                 L @pn(\xB19) @calc(-10*@ny - 5.8));
      }
    }
  `),wavy:ee(`
    svg {
      viewBox: -58 -57 114 114;
      stroke-width: .15;
      stroke: #1B2D37;
      fill: #D5F1FF;
      circle*720 {
        r: @calc(sin(\u03C0/@N*@n)*10);
        cx, cy: @Plot(
          r: 40+sin(4t)*5+sin(12t)*5
        );
      }
    }
  `),flower:ee(`
    svg {
      viewBox: 0 0 10 10.1;
      stroke: #000;
      stroke-width: .1;
      stroke-dasharray: 100;
      stroke-linecap: round;

      path*3 {
        style animation: move @r(2s, 4s) reverse;
        fill: none;
        d: @pn(M 5 10 Q 5 5 8 1,
               M 5 10 Q 4 5 2 4,
               M 5 10 Q 6 6 8 4);
      }
      circle*3 {
        style animation: scale @r(1s, 2s) reverse;
        fill: @pn(yellow, blueviolet, deeppink);
        cx, cy: @pn(8 1, 2 4, 8 4);
        r: @r(.2, .5);
      }

      style {
        @keyframes move {
          to { stroke-dashoffset: 100 }
        }
        @keyframes scale {
          to { r: 0 }
        }
      }
    }
  `),star:ee(`
    svg {
      viewBox: -50 -50 100 100;
      polygon {
        stroke: #000;
        points: @m10.@Plot(
          r: seq(20, 40);
          rotate: 18;
        );
        fill: defs linearGradient {
          gradientTransform: rotate(30);
          stop { offset: 50%; stop-color: deeppink }
          stop { offset: 100%; stop-color: yellow }
        }
      }
    }
  `),"99 bottles of beer":ee(`
    svg {
      viewBox: 0 0 50 1200;
      overflow: visible;
      foreignObject {
        width, height: 100%;
        font-size: 2;
        p*99-1 {
          content: "
            @n bottles of beer on the wall, <br />
            @n bottles of beer. <br />
            Take one down and pass it around, <br />
            @n(-1) bottles of beer on the wall.
          ";
        }
      }
    }
  `)};function ee(e){let t=e.replace(/^\n+/g,""),r=t.length-t.replace(/^\s+/g,"").length;return e.split(`
`).map(s=>s.replace(new RegExp(`^\\s{${r}}`,"g"),"")).join(`
`).trim()}function sr(e,t,r){const n=e.slice();return n[10]=t[r],n}function ir(e){let t,r=e[10].name+"",n;return{c(){t=O("option"),n=me(r),this.h()},l(s){t=I(s,"OPTION",{});var i=E(t);n=de(i,r),i.forEach($),this.h()},h(){t.__value=e[10].value,t.value=t.__value},m(s,i){we(s,t,i),k(t,n)},p:Pe,d(s){s&&$(t)}}}function Os(e){let t,r;return{c(){t=O("pre"),r=me(e[3]),this.h()},l(n){t=I(n,"PRE",{class:!0});var s=E(t);r=de(s,e[3]),s.forEach($),this.h()},h(){x(t,"class","svelte-1kvcih6")},m(n,s){we(n,t,s),k(t,r)},p(n,s){s&8&&Ur(r,n[3])},d(n){n&&$(t)}}}function Is(e){let t,r;return{c(){t=new Fr(!1),r=Ct(),this.h()},l(n){t=Jr(n,!1),r=Ct(),this.h()},h(){t.a=r},m(n,s){t.m(e[3],n,s),we(n,r,s)},p(n,s){s&8&&t.p(n[3])},d(n){n&&$(r),n&&t.d()}}}function Ps(e){let t,r,n,s,i,a,l,u,o,c,f,p,m,h,g,_,d,v,w,Z,X,C,le,ae,D,J,Ge,$t,ne=e[4],A=[];for(let b=0;b<ne.length;b+=1)A[b]=ir(sr(e,ne,b));function Pr(b){e[6](b)}let St={};e[0]!==void 0&&(St.code=e[0]),h=new Cs({props:St}),_t.push(()=>qr(h,"code",Pr)),e[7](h);function jt(b,T){return b[2]==="graph"?Is:Os}let ke=jt(e),R=ke(e);return{c(){t=O("main"),r=O("div"),n=O("header"),s=O("h1"),i=O("a"),a=me(`New Syntax To Write SVG
          `),l=Ke("svg"),u=Ke("line"),o=Ke("polyline"),c=oe(),f=O("select");for(let b=0;b<A.length;b+=1)A[b].c();p=oe(),m=O("div"),Dr(h.$$.fragment),_=oe(),d=O("div"),v=O("header"),w=O("button"),Z=me("Preview"),X=oe(),C=O("button"),le=me("SVG"),ae=oe(),D=O("div"),R.c(),this.h()},l(b){t=I(b,"MAIN",{class:!0});var T=E(t);r=I(T,"DIV",{class:!0});var H=E(r);n=I(H,"HEADER",{class:!0});var M=E(n);s=I(M,"H1",{class:!0});var ue=E(s);i=I(ue,"A",{href:!0,target:!0,class:!0});var Ue=E(i);a=de(Ue,`New Syntax To Write SVG
          `),l=et(Ue,"svg",{xmlns:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var Fe=E(l);u=et(Fe,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(u).forEach($),o=et(Fe,"polyline",{points:!0}),E(o).forEach($),Fe.forEach($),Ue.forEach($),ue.forEach($),c=ce(M),f=I(M,"SELECT",{class:!0});var Nt=E(f);for(let Je=0;Je<A.length;Je+=1)A[Je].l(Nt);Nt.forEach($),M.forEach($),p=ce(H),m=I(H,"DIV",{class:!0});var Et=E(m);Rr(h.$$.fragment,Et),Et.forEach($),H.forEach($),_=ce(T),d=I(T,"DIV",{class:!0});var $e=E(d);v=I($e,"HEADER",{class:!0});var Se=E(v);w=I(Se,"BUTTON",{class:!0});var Mt=E(w);Z=de(Mt,"Preview"),Mt.forEach($),X=ce(Se),C=I(Se,"BUTTON",{class:!0});var At=E(C);le=de(At,"SVG"),At.forEach($),Se.forEach($),ae=ce($e),D=I($e,"DIV",{class:!0});var zt=E(D);R.l(zt),zt.forEach($),$e.forEach($),T.forEach($),this.h()},h(){x(u,"x1","7"),x(u,"y1","17"),x(u,"x2","17"),x(u,"y2","7"),x(o,"points","7 7 17 7 17 17"),x(l,"xmlns","http://www.w3.org/2000/svg"),x(l,"height","16px"),x(l,"viewBox","0 0 24 24"),x(l,"fill","none"),x(l,"stroke","currentColor"),x(l,"stroke-width","3"),x(l,"stroke-linecap","round"),x(l,"stroke-linejoin","round"),x(l,"class","svelte-1vv9v21"),x(i,"href","https://yuanchuan.dev/experimenting-a-new-syntax-to-write-svg"),x(i,"target","_blank"),x(i,"class","svelte-1kvcih6"),x(s,"class","svelte-1kvcih6"),x(f,"class","svelte-1kvcih6"),x(n,"class","editor-header svelte-1kvcih6"),x(m,"class","editor-container svelte-1kvcih6"),x(r,"class","editor svelte-1kvcih6"),x(w,"class","svelte-1kvcih6"),se(w,"active",e[2]==="graph"),x(C,"class","svelte-1kvcih6"),se(C,"active",e[2]==="svg"),x(v,"class","preview-header svelte-1kvcih6"),x(D,"class","preview-graph svelte-1kvcih6"),se(D,"svg",e[2]==="svg"),x(d,"class","preview svelte-1kvcih6"),x(t,"class","svelte-1kvcih6")},m(b,T){we(b,t,T),k(t,r),k(r,n),k(n,s),k(s,i),k(i,a),k(i,l),k(l,u),k(l,o),k(n,c),k(n,f);for(let H=0;H<A.length;H+=1)A[H].m(f,null);k(r,p),k(r,m),Hr(h,m,null),k(t,_),k(t,d),k(d,v),k(v,w),k(w,Z),k(v,X),k(v,C),k(C,le),k(d,ae),k(d,D),R.m(D,null),J=!0,Ge||($t=[tt(f,"change",e[5]),tt(w,"click",e[8]),tt(C,"click",e[9])],Ge=!0)},p(b,[T]){if(T&16){ne=b[4];let M;for(M=0;M<ne.length;M+=1){const ue=sr(b,ne,M);A[M]?A[M].p(ue,T):(A[M]=ir(ue),A[M].c(),A[M].m(f,null))}for(;M<A.length;M+=1)A[M].d(1);A.length=ne.length}const H={};!g&&T&1&&(g=!0,H.code=b[0],Lr(()=>g=!1)),h.$set(H),(!J||T&4)&&se(w,"active",b[2]==="graph"),(!J||T&4)&&se(C,"active",b[2]==="svg"),ke===(ke=jt(b))&&R?R.p(b,T):(R.d(1),R=ke(b),R&&(R.c(),R.m(D,null))),(!J||T&4)&&se(D,"svg",b[2]==="svg")},i(b){J||(Xr(h.$$.fragment,b),J=!0)},o(b){Zr(h.$$.fragment,b),J=!1},d(b){b&&$(t),Yr(A,b),e[7](null),Qr(h),R.d(),Ge=!1,Gr($t)}}}function Ws(e){let t=[];for(let[r,n]of Object.entries(e))t.push({name:r,value:n});return t}function Bs(e,t,r){let n,s=Ws(Ts),i=s[0].value,a,l="graph";function u(m){r(0,i=m.target.value),a.updateCode(i)}function o(m){i=m,r(0,i)}function c(m){_t[m?"unshift":"push"](()=>{a=m,r(1,a)})}const f=()=>r(2,l="graph"),p=()=>r(2,l="svg");return e.$$.update=()=>{e.$$.dirty&1&&r(3,n=Ms(i))},[i,a,l,n,s,u,o,c,f,p]}class Ds extends lr{constructor(t){super(),ar(this,t,Bs,Ps,ur,{})}}export{Ds as default};
